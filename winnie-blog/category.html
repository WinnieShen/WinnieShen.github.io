<div id="category-list">
    <div class="color-gray font-larger">Loading...</div>
</div>
<script src="../resource/js/jquery-2.1.4.min.js"></script>
<script src="data/article.js"></script>
<script>
    $(document).ready(function(){
        loadCategoryDate();
    });
    function loadCategoryDate() {  

        var arr = listArticleYears();
        var text = $("#category-list").html();
        $("#category-list").html("");

        for(var i=0;i<arr.length;i++){
            var artArr = getArticleByYear(arr[i]);
            var ulText = "";
            for(var j=0;j<artArr.length;j++){
                var ulHtml = "<li class='font-common inner-space-two'><span class='font-yahei outer-space-right-ten'>" +
                artArr[j].publishDate +
                "</span><a class='color-black font-tillana font-not-large' onclick='loadOneArticle("+ artArr[j].id +");' >" +
                artArr[j].title +
                "</a></li>";
                ulText += ulHtml;
            }
            var categoryContent ="<div class='category-content'><h3 class='color-black font-tillana'>" +
                    arr[i] + "</h3><ul>" + ulText + "</ul></div>";

            $("#category-list").append(categoryContent);
        }
    }

    function loadOneArticle(id){
        var thisAticle = getArticleById(id);
        $("#category-list").html("");
        var ulText = "<article class='blog-content'>" +
        "<h3><a class='color-black-hover-grey no-underline font-tillana'>"+
        thisAticle.title +
        "</a></h3>" + 
        "<div class='font-common'>" + 
        "<label class='color-gray'>"+
        thisAticle.publishDate +
         "</label>" + 
        "<a class='comments-number no-underline color-grey'>" + 
        "<span class='glyphicon glyphicon-comment'></span>" +
         getCommentsOfBlogSortByDate(thisAticle.id).length +
        "条评论</a></div><div class='blog-real-content' id='article" + id + "'>" +  
        "</div></article>";
      
        $("#category-list").append(ulText);
        $("#article"+id).load(thisAticle.content);
    }
</script>